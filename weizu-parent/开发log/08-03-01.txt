一个订单在不同的代理商那里有不同的状态
所有父级代理商的扣款，首先要父级代理商的余额够，如果下级在上一级代理商那里的余额不够，订单就不能向上提，那订单在不同的代理商那里就有了不同的状态，一个是余额不足，一个是充值进行中；
需要批量更新订单的状态

向上提的时候订单会有不同的状态，向下推送的时候，状态都是统一更新的

record_id可能为空，因为可能余额不足，所以当余额不足的时候就会没有消费记录id（外键可为空）
找到上级代理商的id，当上级代理商的id不为0，就可以得到这个代理商绑定的rateDiscount
然后得到bill_type,order_amount,rate_discount_id,

agency_id
purchase_id
rate_discount_id
order_amount
bill_type
record_id
order_result

先更新账户，再更新消费记录，再更新订单，接下来更新代理商和订单的绑定

用上级代理商还是上一级费率呢？
用费率，那代理商账户怎么判断，通过代理商id，找到父级代理商id并且找到他的
对应票务的账户

通过代理商id，找到直接父级代理商的相关账户信息：账户找到了
父级代理商也找到了，
就可以更新消费记录了

还要有费率
上一级费率一定对应的是上一级代理商吗，如果是，就可以根据上面的得到上一级的
rateDiscountPo了。
先找上一级费率，再找上一级代理商的账户，因为要先确定费率是否带票，
如果不带飘，就找不带票的账户

第二级代理商没有active_id,第三级代理商才有
找到了第二级代理商，就找不到他的上一级费率了。符合常规逻辑

充值方式，第一级是通过网页，第二级以上应该算是通过接口充值

添加完信息，然后通过通道id得到平台信息，利用接口向上提单

订单到达时间，账户余额，折扣查找添加一个通道id

订单结果，应该统一，否则无法统一显示
第一级代理商只显示充值成功和失败
第二级显示待充和充值进行

第一个代理商订单信息添加成功应该保持充值进行的状态
应该加一个active_id返回值rate,list加飞空判断

如果是余额不足待充，应该不能再向上提单了
修改数据库active_id否则会有死循环

欠费等待，停止循环向上提单，
欠费等待，可以向上提单，但是仅限于提一次，再循环一次，下一次就不能提了

为什么需要serviceType，筛选需要的费率

订单列表，去掉通道类型通道名称筛选，去掉通道名称显示
充值等待的单子，能批量提交，
充值订单代理商绑定可能少绑定了一层代理商